<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link href="https://fonts.googleapis.com/css2?family=Teko:wght@300..700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Teko:wght@300..700&display=swap" rel="stylesheet">

<style>
/* navbar alterations*/
#navDemo {
  position: fixed;
  top: 47px;
  left: 0;
  z-index: 2000;
  height: 31%;
  background-color: rgba(51, 51, 51, 0.9);
  overflow-y: auto;
  display: none;
}

#navDemo a {
  padding: 10px 10px;
  text-decoration: none;
  font-size: 15px;
  color: #fff;
  display: block;
}

/* overall page styling */
body {
  background-image: url('https://images.freeimages.com/images/large-previews/56b/cat-1399504.jpg');
  background-attachment: fixed;
  background-size: cover;
  color: #FFFFFF;
  margin: 0;
  padding: 0;
  font-family: "Montserrat";
  overflow-y: auto; /* vertical scrolling */
  height: 100vh;
}

/* heading section styling */
.w3-container {
  margin-bottom: 5px;
  padding-bottom: 0;
}

/* form and table section */
.form-table-container {
  right: 20px;
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  gap: 20px;
  margin: 10px 0 0;
  padding: 10px;
}

/* fixed form styling */
.form-container {
  position: sticky; /* stick to the viewport */
  left: 20px;
  top: 20px;
  width: 250px;
  background-color: rgba(51, 51, 51, 0.9);
  padding: 15px;
  border-radius: 10px;
  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
  color: #fff;
  max-height: 90vh;
  overflow-y: auto;
}

/* input fields styling */
.form-container input {
  width: 100%;
  padding: 5px;
  margin-bottom: 5px;
  border: 1px solid #ddd;
  border-radius: 5px;
  text-align: center;
  font-size: 14px;
  box-sizing: border-box;
}

/* button styling */
.form-container button {
  width: 100%;
  padding: 10px;
  margin-bottom: 5px;
  background-color: #333;
  color: #fff;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.3s;
}

.form-container button:hover {
  background-color: #555;
}

/* table container styling */
#table {
  flex: 1;
  padding: 15px;
  background-color: rgba(255, 255, 255, 0.7);
  border-radius: 10px;
  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
}

/* table styles */
#table table {
  width: 100%;
  border-collapse: collapse;
  border: 1px solid #ddd;
}

#table th, #table td {
  padding: 10px;
  text-align: left;
  border: 1px solid #ddd;
}

#table th {
  background-color: #333;
  color: white;
}

#table tr:nth-child(even) {
  background-color: #b3b3b3;
  color: black;
}

#table tr:nth-child(odd) {
  background-color: #808080;
}

</style>

<body>
<!-- same navbar interface -->
  <div class="w3-top">
  <div class="w3-bar w3-transparent w3-card">
    <div class="dropdown-container" onmouseover="showDropdown()" onmouseout="hideDropdown()">
    <a class="w3-bar-item w3-button w3-padding-large w3-left" 
      href="javascript:void(0)" 
      onmouseover="showDropdown()" 
      onmouseout="hideDropdown()" 
      title="Toggle Navigation Menu">
      <i class="fa fa-bars"></i>
    </a>
  <!-- dropdown menu -->
    <div id="navDemo" class="w3-sidebar w3-bar-block w3-hide" style="width: 200px;"> 
      <a class="w3-padding-large w3-button" href="./1_Conversion.html" onclick="myFunction()">Temperature and Length Converter</a>
      <a class="w3-padding-large w3-button" href="./2_TaxCalcu.html" onclick="myFunction()">Tax Caculator</a>
      <a class="w3-padding-large w3-button" href="./3_NaturalNumbers.html" onclick="myFunction()">Print Natural Numbers</a>
      <a class="w3-padding-large w3-button" href="./4_SimplePayroll.html" onclick="myFunction()">Simple Payroll</a>
    </div>
  </div>
    <a href="./index.html" class="w3-bar-item w3-button w3-padding-large">HOME</a>
  </div>
</div>

<!-- page content -->
<div class="w3-content" style="max-width:2000px;margin-top:50px">

   <!-- title section -->
  <div class="w3-container w3-content w3-center w3-padding" style="max-width:800px">
    <h2 class="w3-wide" style="font-family:Teko;font-size:100px;line-height:0.6">Simple Payroll</h2>
    <h5 class="w3-opacity" style="font-family:Montserrat"><i> <bold>Generate Payroll list with add and delete function.</bold></i></h5>
  </div>
</div>

<!-- main content -->
<div class="form-table-container">
  <!-- form container -->
  <div class="form-container">
    <label for="emname">Employee Name:</label>
    <input id="emname" name="emname" type="text">

    <label for="days">Days Worked:</label>
    <input id="days" name="days" type="number">

    <label for="rate">Daily Rate:</label>
    <input id="rate" name="rate" type="number">

    <label for="less">Deduction Amount:</label>
    <input id="less" name="less" type="number">

    <button id="addtotable">Add to Table</button>
    <button id="clearinput">Clear Input</button>

    <label for="inputs">Total Entries:</label>
    <input id="inputs" name="inputs" type="number" readonly>

    <button id="cleartable">Clear Table</button>

    <label for="delInput">Delete Entry (No.):</label>
    <input id="delInput" name="delInput" type="number">

    <button id="deleteinput">Delete</button>
  </div>
  <!-- table container -->
    <div id="table"></div>
</div>

<script>
    var table = [];

    //initialize table on page load
    document.addEventListener("DOMContentLoaded", function () {
        inittable();
    });

    //add to table
    document.getElementById("addtotable").addEventListener("click", function () {
        var emname = document.getElementById("emname").value;
        var days = document.getElementById("days").value * 1; 
        var rate = document.getElementById("rate").value * 1; 
        var less = document.getElementById("less").value * 1; 

        if (emname === "" || days <= 0 || rate <= 0) {
            alert("Please fill out all fields with valid values.");
            return;
        }

        var tableinput = {
            emname: emname,
            days: days,
            rate: rate,
            less: less,
            grosspay: function () {
                return this.days * this.rate;
            },
            netpay: function () {
                return this.grosspay() - this.less;
            }
        };

        table.push(tableinput);
        document.getElementById("inputs").value = table.length;
        showtable();
    });

    //clear inputs
    document.getElementById("clearinput").addEventListener("click", function () {
        clearinputfields();
    });

    function clearinputfields() {
        document.getElementById("emname").value = "";
        document.getElementById("days").value = "";
        document.getElementById("rate").value = "";
        document.getElementById("less").value = "";
        document.getElementById("emname").focus(); //back to Employee Name input
    }

    //clear table
    document.getElementById("cleartable").addEventListener("click", function () {
        var toclear = confirm("Delete all entries from the table?");
        if (toclear) {
            inittable();
        }
    });

    //delete entry from table
    document.getElementById("deleteinput").addEventListener("click", function () {
        var inputno = document.getElementById("delInput").value * 1;
        if (inputno > 0 && inputno <= table.length) {
            var todelete = confirm("Delete entry No. " + inputno + "?");
            if (todelete) {
                table.splice(inputno - 1, 1); //remove entry
                document.getElementById("inputs").value = table.length;
                showtable();
            }
        } else {
            alert("Invalid entry number.");
        }
    });

    //show table with footer
    function showtable() {
        var theader = "<thead><tr>" +
            "<th>No.</th>" +
            "<th>Employee Name</th>" +
            "<th>Days Worked</th>" +
            "<th>Daily Rate</th>" +
            "<th>Gross Pay</th>" +
            "<th>Deduction Amount</th>" +
            "<th>Net Pay</th>" +
            "</tr></thead>";

        var tbody = "";
        var totalSalary = 0, totalDeductions = 0, totalDeductionsAmt = 0;

        for (var i = 0; i < table.length; i++) {
            var row = table[i];
            totalSalary += row.grosspay();
            totalDeductions += row.less;
            totalDeductionsAmt = totalSalary - totalDeductions;

            tbody += "<tr>" +
                "<td>" + (i + 1) + "</td>" +
                "<td>" + row.emname + "</td>" +
                "<td>" + row.days + "</td>" +
                "<td>" + row.rate + "</td>" +
                "<td>" + row.grosspay() + "</td>" +
                "<td>" + row.less + "</td>" +
                "<td>" + row.netpay() + "</td>" +
                "</tr>";
        }

        var tfooter = "<tfoot><tr>" +
            "<th></th>" +
            "<th></th>" +
            "<th>Total:</th>" +
            "<th>" + totalSalary + "</th>" +
            "<th>" + totalDeductions + "</th>" +
            "<th>" + totalDeductionsAmt + "</th>" +
            "<th></th>" +
            "</tr></tfoot>";

        document.getElementById("table").innerHTML = "<table id='table'>" + theader + "<tbody>" + tbody + "</tbody>" + tfooter + "</table>";
    }

    //initialize table
    function inittable() {
        table = [];
        document.getElementById("inputs").value = table.length;
        document.getElementById("table").innerHTML = "";
    }

//navbar features on small screens
function myFunction() {
  var x = document.getElementById("navDemo");
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
  } else { 
    x.className = x.className.replace(" w3-show", "");
  }
}

function showDropdown() {
    var dropdown = document.getElementById("navDemo");
    dropdown.classList.add("w3-show"); // show dropdown
}
function hideDropdown() {
    var dropdown = document.getElementById("navDemo");
    dropdown.classList.remove("w3-show"); // hide dropdown
}
</script>
</body>
</html>
